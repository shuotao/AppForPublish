# Week 2 使用說明

## 📁 資料夾結構

```
week2/
├── assignment.md                         # 📄 作業說明
├── README.md                             # 📖 課程簡介
├── WEEK2_COMPLETE_GUIDE.md               # 📚 完整學習指南
├── 使用說明.md                            # 📋 本檔案
├── coding_agent_practice.py              # 🔧 編碼代理練習
├── mcp_server_practice.py                # 🔧 MCP 伺服器練習
├── coding_agent_from_scratch_lecture.py  # 📝 講師範例（編碼代理）
├── simple_mcp.py                         # 📝 講師範例（MCP）
├── sync_from_official.sh                 # 🔄 同步腳本
├── data/                                 # 📂 講義資料
│   ├── lecture_9_29_25.txt              # 編碼代理講義
│   └── lecture_10_3_25.txt              # MCP 協議講義
├── Lecture_9_29_25_public.pdf            # 原始 PDF（已轉換）
└── Lecture_10_3_25_public.pdf            # 原始 PDF（已轉換）
```

## 🚀 快速開始

### 1. 閱讀課程內容

```bash
# 建議閱讀順序：
1. README.md           # 了解課程概要
2. assignment.md       # 了解作業要求
3. WEEK2_COMPLETE_GUIDE.md  # 深入學習
```

### 2. 查看講師範例

```bash
# 編碼代理範例
cat coding_agent_from_scratch_lecture.py

# MCP 伺服器範例
cat simple_mcp.py
```

### 3. 開始練習

```bash
# 練習 1：編碼代理
python coding_agent_practice.py

# 練習 2：MCP 伺服器
python mcp_server_practice.py
```

## 📝 作業流程

### 步驟 1：環境準備

```bash
# 安裝必要套件
pip3 install openai python-dotenv fastmcp ollama

# 設定 API Key（擇一）
# 方法 1：環境變數
export OPENAI_API_KEY="your-key"

# 方法 2：建立 .env 檔案
echo "OPENAI_API_KEY=your-key" > .env
```

### 步驟 2：完成練習 1（編碼代理）

開啟 `coding_agent_practice.py`，尋找所有 `TODO` 標記：

- [ ] 實作 `read_file_tool`
- [ ] 實作 `list_files_tool`
- [ ] 實作 `edit_file_tool`
- [ ] 實作 `extract_tool_invocations`
- [ ] 完成對話迴圈中的工具執行邏輯

### 步驟 3：完成練習 2（MCP 伺服器）

開啟 `mcp_server_practice.py`，尋找所有 `TODO` 標記：

- [ ] 實作 `read_file_tool`（加上 @mcp.tool）
- [ ] 實作 `list_files_tool`（加上 @mcp.tool）
- [ ] 實作 `edit_file_tool`（加上 @mcp.tool）
- [ ] 啟動 MCP 伺服器

### 步驟 4：測試

```bash
# 測試編碼代理
python coding_agent_practice.py
# 嘗試指令：
# - "列出當前目錄"
# - "讀取 README.md"
# - "建立一個 hello.py"

# 測試 MCP 伺服器
python mcp_server_practice.py
# 伺服器會監聽 stdio，需要 MCP 客戶端連接
```

## 🔄 從官方倉庫同步

如果官方課程有更新：

```bash
# 執行同步腳本
./sync_from_official.sh

# 或
bash sync_from_official.sh
```

同步選項：
1. 只同步文件（assignment.md, writeup.md）
2. 同步所有檔案（會備份現有檔案）

## 📚 學習資源

### 講義文件

- `data/lecture_9_29_25.txt` - 建構編碼代理
  - 系統提示詞設計
  - 工具註冊機制
  - 對話迴圈實作
  
- `data/lecture_10_3_25.txt` - MCP 協議與應用
  - MCP 基礎概念
  - 標準化工具介面
  - FastMCP 使用方法

### 參考範例

- `coding_agent_from_scratch_lecture.py` - 完整的編碼代理實作
- `simple_mcp.py` - 簡單的 MCP 伺服器範例

## 🐛 常見問題

### Q1: 執行時出現 "無法解析匯入 openai"

```bash
# 安裝 openai 套件
pip3 install openai
```

### Q2: 執行時出現 "無法解析匯入 fastmcp"

```bash
# 安裝 fastmcp 套件
pip3 install fastmcp
```

### Q3: OpenAI API Key 錯誤

```bash
# 檢查是否設定環境變數
echo $OPENAI_API_KEY

# 如果沒有，請設定
export OPENAI_API_KEY="your-actual-key"
```

### Q4: 工具呼叫格式錯誤

確保 LLM 回應格式正確：
```
tool: TOOL_NAME({"param": "value"})
```

注意：
- 使用雙引號（不是單引號）
- JSON 格式正確
- 工具名稱拼寫正確

### Q5: 路徑找不到

使用 `resolve_abs_path` 函式轉換路徑：
```python
full_path = resolve_abs_path(filename)
```

## 💡 學習建議

1. **先理解再實作**
   - 閱讀完整指南
   - 查看講師範例
   - 理解工作原理

2. **循序漸進**
   - 先完成簡單的工具（read_file）
   - 再完成複雜的邏輯（對話迴圈）
   - 逐步測試和除錯

3. **參考範例**
   - 對照講師的完整實作
   - 理解每個函式的作用
   - 模仿並改進

4. **勤於測試**
   - 每完成一個函式就測試
   - 使用簡單的測試案例
   - 印出中間結果以除錯

5. **記錄學習**
   - 在程式碼中加入註解
   - 記錄遇到的問題和解決方法
   - 整理學習心得

## 📊 評分標準

- 編碼代理實作（50 分）
  - 工具函式實作（15 分）
  - 系統提示詞設計（15 分）
  - 對話迴圈實作（15 分）
  - 程式碼品質（5 分）

- MCP 伺服器實作（50 分）
  - FastMCP 設定（10 分）
  - 工具定義（20 分）
  - 伺服器執行（15 分）
  - 程式碼品質（5 分）

## 🎯 完成檢查清單

在提交前，確保：

- [ ] 所有 TODO 都已完成
- [ ] 程式可以成功執行
- [ ] 加入必要的註解
- [ ] 測試過基本功能
- [ ] 檢查程式碼品質
- [ ] 理解實作原理

## 📞 需要幫助？

1. 查看 WEEK2_COMPLETE_GUIDE.md 的詳細說明
2. 參考講師範例程式碼
3. 閱讀講義資料（data/ 資料夾）
4. 查看線上資源（OpenAI API 文件、FastMCP 文件）

祝學習順利！🎉
